function validateArtwork(e){return e?(e.src&&"undefined"!==e.src&&"string"==typeof e.src||(console.warn(" artwork.src invalide:",e.src,"- correction appliqu√©e"),e.src="./images/placeholder.jpg"),e.title=e.title||"Untitled",e.technique=e.technique||"Mixed Media",e.year=e.year||"2024",e):(console.warn(" Artwork undefined"),{src:"./images/placeholder.jpg",title:"Untitled",technique:"Mixed Media",year:"2024"})}const originalDisplayFiltered=window.displayFilteredArtworks;"function"==typeof originalDisplayFiltered&&(window.displayFilteredArtworks=function(e){if(console.log("üõ°Ô∏è Protection displayFilteredArtworks"),!e||!Array.isArray(e))return void console.warn("‚ö†Ô∏è artworks invalide:",e);const t=e.map(e=>validateArtwork(e));return originalDisplayFiltered.call(this,t)}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".burger"),t=document.querySelector(".nav-links");e&&e.addEventListener("click",()=>{t.classList.toggle("nav-active"),e.classList.toggle("toggle")}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})}),loadArtisticGallery();const n=document.querySelector(".contact-form");n&&n.addEventListener("submit",handleFormSubmit)});let mouseX=0,mouseY=0,particles=[];function handleFormSubmit(e){e.preventDefault();const t=e.target,n=new FormData(t),r=Object.fromEntries(n.entries());if(!r.name||!r.email||!r.message)return void alert("Veuillez remplir tous les champs obligatoires.");console.log("Formulaire soumis avec succ√®s:",r);const o=document.createElement("div");o.className="form-success",o.textContent="Votre message a √©t√© envoy√© avec succ√®s !",t.reset(),t.appendChild(o),setTimeout(()=>{o.remove()},5e3)}function initNavigation(){const e=document.querySelectorAll(".nav-links a"),t=document.querySelector(".burger"),n=document.querySelector(".nav-links");e.forEach(r=>{r.addEventListener("click",()=>{n.classList.contains("nav-active")&&(n.classList.remove("nav-active"),t.classList.remove("toggle")),e.forEach(e=>e.classList.remove("active")),r.classList.add("active")})});let r=0;window.addEventListener("scroll",()=>{const e=window.pageYOffset;Math.abs(e-r)>50&&(n.classList.contains("nav-active")&&(n.classList.remove("nav-active"),t.classList.remove("toggle")),r=e)})}function initModernEffects(){document.addEventListener("mousemove",e=>{mouseX=e.clientX/window.innerWidth*100,mouseY=e.clientY/window.innerHeight*100,document.documentElement.style.setProperty("--mouse-x",mouseX+"%"),document.documentElement.style.setProperty("--mouse-y",mouseY+"%")}),window.addEventListener("scroll",()=>{const e=window.pageYOffset,t=-.5*e,n=document.querySelector(".hero");n&&(n.style.transform=`translateY(${t}px)`);document.querySelectorAll(".note").forEach((t,n)=>{const r=.2*(n+1);t.style.transform=`translateY(${e*r}px)`})})}function initCustomCursor(){const e=document.createElement("div");e.className="custom-cursor",document.body.appendChild(e),document.addEventListener("mousemove",t=>{e.style.left=t.clientX+"px",e.style.top=t.clientY+"px"});document.querySelectorAll("a, button, .gallery-item").forEach(t=>{t.addEventListener("mouseenter",()=>{e.style.transform="scale(2)",e.style.background="radial-gradient(circle, var(--neon-pink), transparent)"}),t.addEventListener("mouseleave",()=>{e.style.transform="scale(1)",e.style.background="radial-gradient(circle, var(--neon-blue), transparent)"})})}function initParticleSystem(){const e=document.getElementById("particleCanvas");if(!e)return;const t=e.getContext("2d");function n(){e.width=window.innerWidth,e.height=window.innerHeight}window.addEventListener("resize",n),n();for(let t=0;t<100;t++)particles.push({x:Math.random()*e.width,y:Math.random()*e.height,vx:2*(Math.random()-.5),vy:2*(Math.random()-.5),radius:2*Math.random()+1,opacity:.5*Math.random()+.2});!function n(){t.clearRect(0,0,e.width,e.height),particles.forEach((n,r)=>{n.x+=n.vx,n.y+=n.vy,(n.x<0||n.x>e.width)&&(n.vx*=-1),(n.y<0||n.y>e.height)&&(n.vy*=-1);const o=mouseX*e.width/100-n.x,i=mouseY*e.height/100-n.y;Math.sqrt(o*o+i*i)<100&&(n.vx+=1e-4*o,n.vy+=1e-4*i),t.beginPath(),t.arc(n.x,n.y,n.radius,0,2*Math.PI),t.fillStyle=`rgba(0, 245, 255, ${n.opacity})`,t.fill(),particles.forEach((e,o)=>{if(r!==o){const r=n.x-e.x,o=n.y-e.y,i=Math.sqrt(r*r+o*o);i<80&&(t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(e.x,e.y),t.strokeStyle=`rgba(0, 245, 255, ${.1*(1-i/80)})`,t.stroke())}})}),requestAnimationFrame(n)}()}function initScrollProgress(){const e=document.createElement("div");e.className="scroll-progress",document.body.appendChild(e),window.addEventListener("scroll",()=>{const e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;document.documentElement.style.setProperty("--scroll-progress",e+"%")})}function initCounterAnimations(){const e=document.querySelectorAll("[data-count]"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target,r=parseInt(n.getAttribute("data-count"));let o=0;const i=r/100,a=()=>{o<r?(o+=i,n.textContent=Math.ceil(o),requestAnimationFrame(a)):n.textContent=r};a(),t.unobserve(n)}})},{threshold:.5});e.forEach(e=>t.observe(e))}function initTypewriterEffect(){const e=["Artiste","Compositrice","Cr√©atrice","Innovatrice"],t=document.querySelector(".typewriter");if(!t)return;let n=0,r=0,o=!1;!function i(){const a=e[n];o?(t.textContent=a.substring(0,r-1),r--):(t.textContent=a.substring(0,r+1),r++);let s=o?50:100;o||r!==a.length?o&&0===r&&(o=!1,n=(n+1)%e.length,s=500):(s=2e3,o=!0),setTimeout(i,s)}()}function initMusicVisualizer(){const e=document.querySelector(".hero");if(!e)return;const t=document.createElement("div");t.className="music-visualizer",t.style.cssText="\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n    ",e.appendChild(t);const n=[];for(let e=0;e<30;e++){const e=document.createElement("div");e.className="visualizer-bar",e.style.cssText="\n            position: absolute;\n            bottom: 0;\n            width: 2px;\n            background: linear-gradient(to top, var(--neon-pink), transparent);\n            opacity: 0.7;\n        ",t.appendChild(e),n.push(e)}!function e(){n.forEach((e,t)=>{const n=100*Math.random();e.style.height=n+"%",e.style.transform=`translateX(${3*t}px)`}),requestAnimationFrame(e)}()}async function loadArtisticGallery(){const e=document.getElementById("gallery");if(!e)return;const t=document.createElement("div");t.className="gallery-grid",e.innerHTML="",e.appendChild(t);const n=[{title:"Univers Cosmique",description:"Exploration des profondeurs spatiales",category:"digital-art"},{src:"./images/gallery/IMG_20250531_121300_188.jpg",title:"Horizons Lointains",description:"Paysages imaginaires",category:"photography"},{src:"./images/gallery/IMG_20250531_121432_334.jpg",title:"Abstractions",description:"Formes et couleurs",category:"abstract"},{src:"./images/gallery/IMG_20250531_121521_215.jpg",title:"√âl√©ments Naturels",description:"La beaut√© de la nature",category:"nature"},{src:"./images/gallery/IMG_20250531_121311_304.jpg",title:"Horizons Infinis",description:"Paysages oniriques",category:"photography"},{src:"./images/gallery/IMG_20250531_121451_526.jpg",title:"Abstractions Color√©es",description:"Jeu de couleurs et de formes",category:"abstract"},{src:"./images/gallery/IMG_20250531_121503_326.jpg",title:"Nature Sauvage",description:"La beaut√© √† l'√©tat brut",category:"nature"}];createCategoryFilters(n,t),displayFilteredArtworks(n,t,"all"),animateGalleryItems()}function createCategoryFilters(e,t){const n=["all",...new Set(e.map(e=>e.category))],r=document.createElement("div");r.className="gallery-filters",n.forEach(n=>{const o=document.createElement("button");o.className="filter-btn "+("all"===n?"active":""),o.textContent=formatCategoryName(n),o.dataset.filter=n,o.addEventListener("click",()=>{document.querySelectorAll(".filter-btn").forEach(e=>{e.classList.remove("active")}),o.classList.add("active"),displayFilteredArtworks(e,t,n)}),r.appendChild(o)}),t.parentNode.insertBefore(r,t)}async function displayFilteredArtworks(e,t,n){t.innerHTML='<div class="loading-placeholder"></div>';const r="all"===n?e:e.filter(e=>e.category===n);t.innerHTML="";const o=r.map(async(e,n)=>{try{if(await checkImageExists(e.src)){const r=createArtisticGalleryItem(e,n);t.appendChild(r)}else{const r=createPlaceholderItem(e,n);t.appendChild(r)}}catch(r){console.error("Erreur lors du chargement de l'image:",e.src,r);const o=createErrorItem(e,n);t.appendChild(o)}});await Promise.all(o),animateGalleryItems()}function checkImageExists(e){return new Promise(t=>{if(!e||"undefined"===e||"string"!=typeof e)return console.warn("üö´ checkImageExists: path invalide:",e),void t(!1);console.log("üîç V√©rification image:",e);const n=new Image;n.onload=()=>{console.log("‚úÖ Image trouv√©e:",e),t(!0)},n.onerror=()=>{console.warn("‚ùå Image non trouv√©e:",e),t(!1)},n.src=e})}function createErrorItem(e,t){const n=document.createElement("div");return n.className="gallery-item error-item",n.style.setProperty("--index",t),n.innerHTML=`\n        <div class="error-placeholder">\n            <div class="error-content">\n                <span class="error-icon">‚ùå</span>\n                <p>Erreur de chargement</p>\n                <small>${e.title||"Image non disponible"}</small>\n            </div>\n        </div>\n    `,n}function animateGalleryItems(){document.querySelectorAll(".gallery-item").forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(20px)",setTimeout(()=>{e.style.transition="opacity 0.6s ease, transform 0.6s ease",e.style.opacity="1",e.style.transform="translateY(0)"},100*t)})}function formatCategoryName(e){return"all"===e?"Tout voir":e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function createPlaceholderItem(e){if(console.log(" createPlaceholderItem appel√© avec:",e),!e)return console.warn(" createPlaceholderItem: artwork undefined"),document.createElement("div");let t="";e.src&&"string"==typeof e.src&&"undefined"!==e.src?(t=e.src,console.log(" Image src valide:",t)):(console.warn(" artwork.src invalide:",e.src),t="./images/placeholder.jpg");const n=document.createElement("div");return n.className="gallery-item placeholder-item",n.innerHTML=`\n        <div class="artwork-container">\n            <img src="${t}" \n                 alt="${e.title||"Artwork Sarah-Jane Iffra"}" \n                 class="artwork-image"\n                 onerror="this.src='./images/placeholder.jpg'; console.warn('Image non trouv√©e:', this.src);">\n            <div class="artwork-info"></div>\n        </div>\n    `,n}document.addEventListener("DOMContentLoaded",function(){if(initModernEffects(),initCustomCursor(),initParticleSystem(),initScrollProgress(),initCounterAnimations(),initTypewriterEffect(),initMusicVisualizer(),initNavigation(),"function"==typeof initVideos)initVideos();else{console.log(" initVideos pas disponible - cr√©tion locale");document.querySelectorAll(".video-container, video[data-src]").forEach(e=>{e.dataset.src&&"VIDEO"===e.tagName&&(e.src=e.dataset.src)})}if("function"==typeof initGallery)initGallery();else{console.log(" initGallery pas disponible - initialisation locale");try{document.querySelectorAll(".gallery-item, .artwork-item").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.querySelector("img");t&&t.src&&"undefined"!==t.src&&console.log(" Clic galerie:",t.alt||"Image")})}),console.log("‚úÖ Galerie initialis√©e localement")}catch(e){console.warn("‚ö†Ô∏è Erreur init galerie locale:",e)}}initAnimations(),initBackToTop(),initContactForm(),initScrollSpy(),initLazyLoading(),initServiceWorker()});